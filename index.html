<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TKK4N8JVT9"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-TKK4N8JVT9');
</script>

<title>Biatlon – výpočet bodů</title>

<style>
body{
    font-family: system-ui, -apple-system, BlinkMacSystemFont, Arial, sans-serif;
    max-width: 420px;
    margin: auto;
    padding: 20px;
    text-align: center;
    background: #ffffff;
    color: #111;
}

h2{ margin-bottom: 25px; }

.time-row{
    display:flex;
    justify-content:center;
    gap:6px;
    margin-bottom:12px;
}

.time-row input{
    width:60px;
    padding:12px;
    font-size:18px;
    border-radius:8px;
    border:1px solid #ccc;
    text-align:center;
}

.buttons{
    display:flex;
    gap:10px;
    margin-top:15px;
}

button{
    flex:1;
    padding:16px;
    font-size:18px;
    background:#0066cc;
    color:white;
    border:none;
    border-radius:10px;
}

button.secondary{
    background:#888;
    font-size:16px;
}

#result{
    margin-top:25px;
    font-size:26px;
    font-weight:bold;
}

.footer{
    margin-top:50px;
    font-size:12px;
    font-style:italic;
    color:#999;
}

@media (prefers-color-scheme: dark){
    body{ background:#111; color:#eee; }
    .time-row input{ background:#222; color:#eee; border:1px solid #444; }
    button{ background:#1a73e8; }
    button.secondary{ background:#666; }
}
</style>
</head>

<body>

<h2>Bodové hodnocení biatlonu</h2>

<h4>Čas vítěze</h4>
<div class="time-row">
  <input id="w_min" inputmode="numeric" maxlength="3" placeholder="min">
  <input id="w_sec" inputmode="numeric" maxlength="2" placeholder="sek">
  <input id="w_tenth" inputmode="numeric" maxlength="1" placeholder="des">
</div>

<h4>Odstup závodníka</h4>
<div class="time-row">
  <input id="o_min" inputmode="numeric" maxlength="3" placeholder="min">
  <input id="o_sec" inputmode="numeric" maxlength="2" placeholder="sek">
  <input id="o_tenth" inputmode="numeric" maxlength="1" placeholder="des">
</div>

<div class="buttons">
  <button onclick="calculate()">Spočítat</button>
  <button class="secondary" onclick="clearAll()">Vymazat</button>
</div>

<div id="result"></div>

<div class="footer">
Vytvořil ZPH (2026)
</div>

<script>
const clickSound = new Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=");

const fields = [
  w_min, w_sec, w_tenth,
  o_min, o_sec, o_tenth
];

// digits only + clear on focus
fields.forEach(f=>{
  f.addEventListener("input", ()=>{
    f.value = f.value.replace(/\D/g,'');
  });

  f.addEventListener("focus", ()=>{
    f.value = "";
  });
});

// auto jump
fields.forEach((f,i)=>{
  f.addEventListener("keyup", ()=>{
    if(f.value.length >= f.maxLength){
      clickSound.play();
      fields[i+1]?.focus();
    }
  });
});

// limits
[w_sec,o_sec].forEach(f=>{
  f.addEventListener("input", ()=>{
    if(Number(f.value)>59) f.value=59;
  });
});

[w_tenth,o_tenth].forEach(f=>{
  f.addEventListener("input", ()=>{
    if(Number(f.value)>9) f.value=9;
  });
});

function toSeconds(min, sec, tenth){
  return Number(min)*60 + Number(sec) + Number(tenth)/10;
}

function calculate(){

  clickSound.play();

  let winner = toSeconds(w_min.value,w_sec.value,w_tenth.value);
  let offset = toSeconds(o_min.value,o_sec.value,o_tenth.value);

  if(!winner || isNaN(offset)){
    result.innerText = "Vyplň všechna pole.";
    return;
  }

  let points = ((winner - offset) / winner) * 100;
  result.innerText = "Body: " + points.toFixed(2);
}

function clearAll(){
  fields.forEach(f=>f.value="");
  result.innerText="";
  w_min.focus();
}
</script>

</body>
</html>
